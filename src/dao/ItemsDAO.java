package dao;import java.util.ArrayList;import java.sql.Connection;import java.sql.PreparedStatement;import java.sql.ResultSet;import java.sql.SQLException;import util.DBHelper;import entity.Items;public class ItemsDAO {	public ArrayList<Items> getAllItems() {		Connection conn = null;		PreparedStatement ptmt = null;		ResultSet rs = null;		ArrayList<Items> list = new ArrayList<Items>();		try {			conn = DBHelper.getConnection();			String sql = "select * from Items";			ptmt = conn.prepareStatement(sql);			rs = ptmt.executeQuery();			while (rs.next()) {				Items item = new Items();				item.setId(rs.getInt("id"));				item.setName(rs.getString("name"));				item.setCity(rs.getString("city"));				item.setPrice(rs.getInt("price"));				item.setNumber(rs.getInt("number"));				item.setPicture(rs.getString("picture"));				list.add(item);			}			return list;		} catch (Exception e) {			e.printStackTrace();			return null;		} finally {			try {				rs.close();				ptmt.close();			} catch (SQLException e) {				// TODO Auto-generated catch block				e.printStackTrace();			}		}	}	public Items getById(int id) {		Connection conn = null;		PreparedStatement ptmt = null;		ResultSet rs = null;		try {			conn = DBHelper.getConnection();			String sql = "select * from Items where id =?";			ptmt = conn.prepareStatement(sql);			ptmt.setInt(1, id);			rs = ptmt.executeQuery();			Items item = new Items();			if (rs.next()) {				item.setId(rs.getInt("id"));				item.setName(rs.getString("name"));				item.setCity(rs.getString("city"));				item.setPrice(rs.getInt("price"));				item.setNumber(rs.getInt("number"));				item.setPicture(rs.getString("picture"));			}			return item;		} catch (Exception e) {			e.printStackTrace();			return null;		} finally {			try {				rs.close();				ptmt.close();			} catch (SQLException e) {				// TODO Auto-generated catch block				e.printStackTrace();			}		}	}	// 获取最近浏览的五条记录	public ArrayList<Items> getViewList(String str) {		// 待删		System.out.println("Cookie:" + str);		ArrayList<Items> list = new ArrayList<Items>();		if (str != null) {			String[] viewList = str.split(",");			int count = 0;			while (viewList.length > count && count < 5) {				list.add(getById(Integer.parseInt(viewList[count])));				count++;			}		}		return list;	}	public static void main(String[] args) {		ItemsDAO dao = new ItemsDAO();		ArrayList<Items> list = dao.getAllItems();		System.out.println(list.get(0).toString());		Items item = dao.getById(1);		System.out.println(item.toString());		ArrayList<Items> list1 = dao.getViewList("2,3,1,");		System.out.println(list1.get(2).toString());	}}